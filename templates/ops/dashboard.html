{% extends 'layout.html' %}{% block main %}    <div class="page-header">        <h1> Dashboard </h1>    </div>    <div class="row">        <div class="col-xs-12">            <div id="dialog-alert" class="hide">                <div class="space-6"></div>                <p id="dialog-text" class="bigger-110 bolder center grey">                    <i class="icon-hand-right blue bigger-120"></i>                </p>            </div>            <div class="table-header"> 区域列表</div>            <div class="table-responsive">                <table id="tables" class="table table-striped table-bordered table-hover">                    <thead>                    <tr>                        <th> ZStack大盘</th>                        <th> 虚拟机态势图</th>                    </tr>                    </thead>                    <tbody>                    <tr>                        <td id="container" class="col-xs-6" style="height: 300px">                        </td>                        <td id="host" class="col-xs-6" style="height: 300px">                        </td>                    </tr>                    </tbody>                </table>                <table id="tables" class="table table-striped table-bordered table-hover">                    <thead>                    <tr>                        <th>CPU资源使用情况</th>                        <th>内存资源使用情况</th>                        <th>存储资源使用情况</th>                    </tr>                    </thead>                    <tbody>                    <tr>                        <td id="contain_cpu" class="col-xs-4" style="height: 300px">                            {#                            <div id="contain_cpu" style="width: 400px;height: 300px"></div>#}                        </td>                        <td id="contain_mem" class="col-xs-4" style="height: 300px">                            {#                            <div id="contain_mem" style="width: 400px;height: 300px"></div>#}                        </td>                        <td id="contain_disc" class="col-xs-4" style="height: 300px">                            {#                            <div id="contain_disc" style="width: 400px;height: 300px"></div>#}                        </td>                    </tr>                    </tbody>                </table>                <table id="table_showing" class="table table-striped table-bordered table-hover">                    <thead>                    <tr>                        <th>物理服务器用途占比</th>                    </tr>                    </thead>                    <tbody>                    <tr>                        <td id="contain_showing" class="col-xs-12" style="height: 600px">                        </td>                    </tr>                    </tbody>                </table>            </div>        </div>    </div>{% endblock %}{% block script %}    <script src="/static/js/chosen.jquery.min.js"></script>    <script src="/static/js/jquery.dataTables.min.js"></script>    <script src="/static/js/jquery.dataTables.bootstrap.js"></script>    <script src="/static/js/jquery-ui-1.10.3.full.min.js"></script>    <script src="/static/js/jquery.ui.touch-punch.min.js"></script>    <script src="/static/js/all-config.js"></script>    <script src="/static/js/echarts.min.js"></script>    <script type="text/javascript" src="/static/js/echarts-all-3.js"></script>    <script type="text/javascript" src="/static/js/ecStat.min.js"></script>    <script type="text/javascript" src="/static/js/dataTool.min.js"></script>    <script type="text/javascript" src="/static/js/china.js"></script>    <script type="text/javascript" src="/static/js/world.js"></script>    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>    <script type="text/javascript" src="/static/js/bmap.min.js"></script>    <script type="text/javascript">        var dom1 = document.getElementById("host");        var myChart1 = echarts.init(dom1);        var app1 = {};        option = null;        app1.title = '折柱混合';        {#        myChart1.showLoading();#}        option = {            tooltip: {                trigger: 'axis',                axisPointer: {                    type: 'cross',                    crossStyle: {                        color: '#999'                    }                }            },            toolbox: {                feature: {                    dataView: {show: true, readOnly: false},                    magicType: {show: true, type: ['line', 'bar']},                    restore: {show: true},                    saveAsImage: {show: true}                }            },            legend: {                data: ['增长量', '删除量', '总数量']            },            xAxis: [                {                    type: 'category',                    data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],                    axisPointer: {                        type: 'shadow'                    }                }            ],            yAxis: [                {                    type: 'value',                    name: '虚拟机',                    min: 0,                    max: 250,                    interval: 50,                    axisLabel: {                        formatter: '{value} 个'                    }                },                {                    type: 'value',                    name: '资源',                    min: 0,                    max: 100,                    interval: 20,                    axisLabel: {                        formatter: '{value} %'                    }                }            ],            series: [                {                    name: '增长量',                    type: 'bar',                    data: [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3]                },                {                    name: '删除量',                    type: 'bar',                    data: [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3]                },                {                    name: '总数量',                    type: 'line',                    yAxisIndex: 1,                    data: [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 23.4, 23.0, 16.5, 12.0, 6.2]                }            ]        };        ;        if (option && typeof option === "object") {            myChart1.setOption(option, true);        }        $(document).ready(function () {            $.ajaxSetup({                beforeSend: function (xhr, settings) {                    xhr.setRequestHeader('X-CSRFtoken', $.cookie('csrftoken'))                }            });            requestss();            {#            setInterval(function () {#}            {#                requestss();#}            {#            }, 10000);#}        });        function requestss() {            $.ajax({                "dataType": 'json',                "type": "POST",                "url": "/dashboard/index",                "data": "",                "success": function (data) {                    fetchData_mem(data[1])                    fetchData_disc(data[2])                    fetchData_cpu(data[0])                    fetchData_dash(data[3])                    fetchData_showing(data[4])                },                "error": function () {                    alert("查询失败");                }            });        }        var dom = document.getElementById("container");        var myChart = echarts.init(dom);        var app = {};        option = null;        // 初始 option        option = {            title: {                text: 'ZStack仪表盘'            },            tooltip: {},            legend: {                data: ['数量']            },            xAxis: {                data: []            },            yAxis: {},            series: [{                name: '数量',                type: 'bar',                data: []            }]        };        myChart.showLoading();        function fetchData_dash(data) {            myChart.hideLoading();            myChart.setOption({                xAxis: {                    data: data[0]                },                series: [{                    // 根据名字对应到相应的系列                    name: '数量',                    data: data[1]                }]            });        }        ;        if (option && typeof option === "object") {            myChart.setOption(option, true);        }        var dom2 = document.getElementById("contain_cpu");        var myChart2 = echarts.init(dom2);        var app2 = {};        option = null;        option = {            tooltip: {                formatter: "{a} <br/>{b} : {c}%"            },            toolbox: {                feature: {                    restore: {},                    saveAsImage: {}                }            },            series: [                {                    name: '业务指标',                    type: 'gauge',                    detail: {formatter: '{value}%'},                    data: [{value: 50, name: '使用率'}]                }            ]        };        myChart2.showLoading();        function fetchData_cpu(data) {            myChart2.hideLoading();            myChart2.setOption({                series: [{                    // 根据名字对应到相应的系列                    name: '数量',                    data: [{value: 100 - data, name: '使用率'}]                }]            });        }        ;        if (option && typeof option === "object") {            myChart2.setOption(option, true);        }        var dom3 = document.getElementById("contain_mem");        var myChart3 = echarts.init(dom3);        var app3 = {};        option = null;        option = {            tooltip: {                formatter: "{a} <br/>{b} : {c}%"            },            toolbox: {                feature: {                    restore: {},                    saveAsImage: {}                }            },            series: [                {                    name: '业务指标',                    type: 'gauge',                    detail: {formatter: '{value}%'},                    data: [{value: 50, name: '使用率'}]                }            ]        };        myChart3.showLoading();        function fetchData_mem(data) {            myChart3.hideLoading();            myChart3.setOption({                series: [{                    // 根据名字对应到相应的系列                    name: '数量',                    data: [{value: 100 - data, name: '使用率'}]                }]            });        }        ;        if (option && typeof option === "object") {            myChart3.setOption(option, true);        }        var dom4 = document.getElementById("contain_disc");        var myChart4 = echarts.init(dom4);        var app4 = {};        option = null;        option = {            tooltip: {                formatter: "{a} <br/>{b} : {c}%"            },            toolbox: {                feature: {                    restore: {},                    saveAsImage: {}                }            },            series: [                {                    name: '业务指标',                    type: 'gauge',                    detail: {formatter: '{value}%'},                    data: [{value: 50, name: '使用率'}]                }            ]        };        myChart4.showLoading();        function fetchData_disc(data) {            myChart4.hideLoading();            myChart4.setOption({                series: [{                    // 根据名字对应到相应的系列                    name: '数量',                    data: [{value: 100 - data, name: '使用率'}]                }]            });        }        ;        if (option && typeof option === "object") {            myChart4.setOption(option, true);        }        var dom5 = document.getElementById("contain_showing");        var myChart5 = echarts.init(dom5);        var app5 = {};        option = null;        option = {            title: {                text: 'ZStack管理引擎统计情况',                subtext: '公司：找钢网     部门：技术保障中心   系统运维部\n',                x: 'center'            },            tooltip: {                trigger: 'item',                formatter: "{a} {b} :{d}%",                textStyle: {                    fontSize: 14                }            },            legend: {                orient: 'vertical',                left: 'left',                data: ['总部', '鹏博士', '世纪互联']            },            toolbox: {                show: true,                orient: 'vertical',                left: 'right',                top: 'center',                feature: {                    dataView: {readOnly: false},                    restore: {},                    saveAsImage: {}                }            },            grid: [                {x: '7.5%', y: '65%', width: '88%', height: '30%'},            ],            xAxis: [                {                    gridIndex: 0,                    type: 'category',                    axisTick: {                        alignWithLabel: true                    },                    data: ['网络策略', '应用比例', '在线状态', '环境类型']                },            ],            yAxis: [                {                    gridIndex: 0, name: '年级', show: false                },            ],            series: [                {                    name: 'zstack物理机分布',                    type: 'pie',                    //roseType:'radius',                    radius: '45%',                    center: ['50%', '33%'],                    data: [],                    label: {                        normal: {                            position: 'outside',                            formatter: '{a} :{b} {c}台',                            textStyle: {                                color: '',                                fontSize: 14                            }                        }                    },                    itemStyle: {                        emphasis: {                            shadowBlur: 10,                            shadowOffsetX: 0,                            shadowColor: 'rgba(0, 0, 0, 0.5)'                        }                    }                },                {                    name: '',                    type: 'pie',                    //roseType:'radius',                    radius: '22%',                    center: ['18%', '80.2%'],                    data: [],                    label: {                        normal: {                            position: 'inner',                            formatter: '{c}台',                            textStyle: {                                color: '#ffffff',                                fontSize: 14                            }                        }                    },                    itemStyle: {                        emphasis: {                            shadowBlur: 10,                            shadowOffsetX: 0,                            shadowColor: 'rgba(0, 0, 0, 0.5)'                        }                    }                },                {                    name: '',                    type: 'pie',                    radius: '22%',                    center: ['40%', '81%'],                    data: [],                    label: {                        normal: {                            position: 'inner',                            formatter: '{c}台',                            offset: [, 100],                            textStyle: {                                color: '#ffffff',                                fontSize: 14                            }                        }                    },                    itemStyle: {                        emphasis: {                            shadowBlur: 10,                            shadowOffsetX: 0,                            shadowColor: 'rgba(0, 0, 0, 0.5)'                        }                    }                },                {                    name: '',                    type: 'pie',                    //roseType:'radius',                    radius: '22%',                    center: ['62%', '81%'],                    data: [],                    label: {                        normal: {                            position: 'inner',                            formatter: '{c}台',                            textStyle: {                                color: '#ffffff',                                fontSize: 14                            }                        }                    },                    itemStyle: {                        emphasis: {                            shadowBlur: 10,                            shadowOffsetX: 0,                            shadowColor: 'rgba(0, 0, 0, 0.5)'                        }                    }                },                {                    name: '',                    type: 'pie',                    //roseType:'radius',                    radius: '22%',                    center: ['84%', '81%'],                    data: [],                    label: {                        normal: {                            position: 'outside',                            formatter: '{c}台',                            textStyle: {                                color: '',                                fontSize: 14                            }                        }                    },                    itemStyle: {                        emphasis: {                            shadowBlur: 10,                            shadowOffsetX: 0,                            shadowColor: 'rgba(0, 0, 0, 0.5)'                        }                    }                },            ]        };        myChart5.showLoading();        function fetchData_showing(data) {            myChart5.hideLoading();            myChart5.setOption({                legend: {                    data: data[0]                },                series: [                    {                        // 根据名字对应到相应的系列                        name: 'ZStack服务器占比统计',                        data: data[1]                    },                    {                        // 根据名字对应到相应的系列                        name: '访问策略',                        data: data[2]                    },                    {                        name: '应用类型',                        data: data[3]                    },                    {                        name: '状态',                        data:data[4]                    },                    {                        name: '环境',                        data: data[5]                    }]            });        }        ;        if (option && typeof option === "object") {            myChart5.setOption(option, true);        }    </script>{% endblock %}