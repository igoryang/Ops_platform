{% extends 'layout.html' %}{% block main %}    <div class="page-header">        <h1>            Host            <button class="btn btn-sm btn-success" onclick="create()"><i class="icon-ok"></i>新增</button>            <from class="form-search navbar-form navbar-right">                <input type="text" class="search-query input-medium">                <button type="submit" class="btn btn-sm">Search</button>            </from>        </h1>    </div><!-- /.page-header -->    <div class="row">        <form id="form_data">            <div id="dialog-confirm" class="hide">                <div class="row">                    <div class="col-xs-4" style="text-align: right;">                        主机UUID：                    </div>                    <div class="col-xs-8">                        <input id="hostUuid" value="" name="hostUuid">                    </div>                    <div class="col-xs-4" style="text-align: right;">                        主机名称：                    </div>                    <div class="col-xs-8">                        <input id="hostName" value="" name="hostName">                    </div>                    <div class="col-xs-4" style="text-align: right;">                        主机描述：                    </div>                    <div class="col-xs-8">                        <input id="hostDesc" value="" name="hostDesc">                    </div>                </div>            </div>        </form>        <div class="col-xs-12">            <div id="dialog-alert" class="hide">                <div class="space-6"></div>                <p id="dialog-text" class="bigger-110 bolder center grey">                    <i class="icon-hand-right blue bigger-120"></i>                </p>            </div>            <div class="table-header">                主机列表            </div>            <div class="table-responsive">                <table id="tables" class="table table-striped table-bordered table-hover">                    <thead>                    <tr>                        {#                        <th>ID</th>#}                        <th>主机名称</th>                        <th>UUID</th>                        <th>创建时间</th>                        <th>内存</th>                        <th>CPU</th>                        <th>状态</th>                        <th>类型</th>                        <th>集群</th>                        <th>属性</th>                        <th>操作</th>                    </tr>                    </thead>                    <tbody>                    </tbody>                </table>            </div>        </div>    </div>{% endblock %}{% block script %}    <script src="/static/js/chosen.jquery.min.js"></script>    <script src="/static/js/jquery.dataTables.min.js"></script>    <script src="/static/js/jquery.dataTables.bootstrap.js"></script>    <script src="/static/js/jquery-ui-1.10.3.full.min.js"></script>    <script src="/static/js/jquery.ui.touch-punch.min.js"></script>    <script src="/static/js/all-config.js"></script>    <script>        var edit = function () {            createDialog("编辑区域信息", updateProductHandler)        };        var createDialog = function (title, successHandler) {            $("#dialog-confirm").removeClass('hide').dialog({                resizable: false,                width: '320',                modal: true,                title: "<div class='widget-header'><h4 class='smaller'>" + title + "</h4></div>",                title_html: true,                buttons: [                    {                        html: "<i class='ace-icon fa fa-check bigger-110'></i>&nbsp; 确认 &nbsp;",                        "class": "btn btn-success btn-minier",                        click: successHandler                    },                    {                        html: "<i class='ace-icon fa fa-times bigger-110'></i>&nbsp; 取消 &nbsp;",                        "class": "btn btn-danger btn-minier",                        click: function () {                            $(this).dialog("close");                        }                    }                ]            });        };        var updateProductHandler = function () {            var dialog = $(this);            $('.ui-dialog-buttonset').children().first().attr('disabled', 'disabled');            $.ajax({                url: "/project/product/saveInfo",                type: "POST",                data: $('#form_data').serialize(),                traditional: true,                {#                contentType: "application/json; charset=utf-8",#}                dataType: "json",                success: function (data) {                    if (data.success) {                        $('#tables').DataTable().fnSettings()._iDisplayStart = 0;                        $('#tables').DataTable().fnDraw();                        dialog.dialog("close");                    }                    else {                        $('#message').html(data.message);                    }                }            });        };        $(document).ready(function () {            $.ajaxSetup({                beforeSend: function (xhr, settings) {                    xhr.setRequestHeader('X-CSRFtoken', $.cookie('csrftoken'))                }            });            var tableConfig = jQuery.extend(DATATABLE_CONFIG, {                //绑定列数据，名字和json串里的key相同，只有这里绑定了表格中才会显示数据                aoColumns: [                    {                        "mDataProp": "name",                        "sWidth": "null"                    },                    {                        "mDataProp": "uuid",                        "sWidth": "null"                    },                    {                        "mDataProp": "createDate",                        "sWidth": "null"                    },                    {                        "mDataProp": "totalMemoryCapacity",                        "sWidth": "null"                    },                    {                        "mDataProp": "totalCpuCapacity",                        "sWidth": "null"                    },                    {                        "mDataProp": "state",                        "sWidth": "null"                    },                    {                        "mDataProp": "hypervisorType",                        "sWidth": "null"                    },                    {                        "mDataProp": "clusterUuid",                        "sWidth": "null"                    },                    {                        "mDataProp": "description",                        "sWidth": "null"                    }                    {#                    {sWidth: "70px"}#}                ],                "fnServerParams": function (aoData) {                    aoData.push({                        "name": "method",                        "value": $('#api_method').val()                    });                    aoData.push({                        "name": "srtype",                        "value": $('#secrect_type').val()                    });                    aoData.push({                        "name": "partname",                        "value": $('#part_id').val()                    });                    aoData.push({                        "name": "iDisplayLength",                        "value": $('#iDisplayLength').val()                    });                    aoData.push({                        "name": "partname",                        "value": $('#part_id').val()                    });                },                "aoColumnDefs": [                    {                        "aTargets": [9],  // this your column of action                        "mData": null,                        "mRender": function (data, type, full) {                            var result = '<div  class="visible-md visible-lg hidden-sm hidden-xs btn-group">';                            result +=                                '<button class="btn btn-xs btn-primary" onclick="edit(' + full.id + ')">修改</button>' +                                '<button class="btn btn-xs btn-danger" onclick="del(' + full.id + ')">删除</button>' +                                '</div>';                            return result;                        }                    }                ],                iDisplayLength: 20, //默认每页显示多少条记录                pagingType: "full_numbers",//分页样式的类型full_numbers                sAjaxSource: "/computer/host",                fnServerData: function (sSource, aoData, fnCallback, oSettings) {                    oSettings.jqXHR = $.ajax({                        "dataType": 'json',                        "type": "POST",                        "url": sSource,                        "data": aoData,                        "success": function (data) {                            fnCallback(data);                        },                        "error": function () {                            alert("查询失败");                        }                    });                }            });            $('#tables').DataTable(tableConfig);        });    </script>{% endblock %}