<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","/demo/ajax/ajax_info.txt",true);  ///XMLHttpRequest 对象的 open() 和 send() 方法
xmlhttp.send();
}
</script>

</head>
<body>
<A href="http://code.ziqiangxuetang.com/ajax/ajax-tutorial.html"> <H2>AJAX </H2>   </A>
<P>
    AJAX 教程
这是第一篇AJAX 简介 »
AJAX = Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。<br />

AJAX 不是新的编程语言，而是一种使用现有标准的新方法。<br />

AJAX 是与服务器交换数据并更新部分网页的艺术，在不重新加载整个页面的情况下。<br />
AJAX 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。<br />
您应当具备的基础知识
在继续学习之前，您需要对下面的知识有基本的了解：
HTML / XHTML
CSS
JavaScript / DOM<br />
    AJAX是基于现有的Internet标准，并且联合使用它们：

XMLHttpRequest 对象 (异步的与服务器交换数据)
JavaScript/DOM (信息显示/交互)
CSS (给数据定义样式)
XML (作为转换数据的格式)<br />

</P>
<br />

<H3>服务器响应</H3>
如需获得来自服务器的响应，请使用 :<br />

1,XMLHttpRequest 对象的responseText 或 responseXML 属性。<br />

属性	描述
responseText	获得字符串形式的响应数据。<br />

document.getElementById("myDiv").innerHTML=xmlhttp.responseText;

<br />

responseXML	获得 XML 形式的响应数据。<br />

xmlDoc=xmlhttp.responseXML;
txt="";
x=xmlDoc.getElementsByTagName("ARTIST");
for (i=0;i<x.length;i++)
  {
  txt=txt + x[i].childNodes[0].nodeValue + "<br>";
  }
document.getElementById("myDiv").innerHTML=txt;



<br />
<H3>AJAX – onreadystatechange 事件</H3>
每当 readyState 改变时，就会触发 onreadystatechange 事件。

readyState 属性存有 XMLHttpRequest 的状态信息。

下面是 XMLHttpRequest 对象的三个重要的属性：
属性	描述

onreadystatechange	存储函数（或函数名），每当 readyState 属性改变时，就会调用该函数。
readyState
                存有 XMLHttpRequest 的状态。从 0 到 4 发生变化。

                0: 请求未初始化

                1: 服务器连接已建立

                2: 请求已接收

                3: 请求处理中

                4: 请求已完成，且响应已就绪

status	        200: "OK"
                404: 未找到页面


<br />

<h3>AJAX ASP/PHP 实例</h3>

<br />

<h3>AJAX 数据库实例</h3>

<br />
<h3>AJAX XML</h3>

<br />
<h3>Start typing a name in the input field below:</h3>
<form action="">
First name: <input type="text" id="txt1" onkeyup="showHint(this.value)">
</form>
<p>Suggestions: <span id="txtHint"></span></p>

<br />


<div id="myDiv"><h2>Let AJAX change this text | 修改该文本内容 </h2></div>
<button type="button" onclick="loadXMLDoc()">Change Content</button>


<br />
<br />
<br />

<div id="txtCDInfo">
<button onclick="loadXMLDoc('cd_catalog.xml')">Get CD info</button>
</div>
</div>

<br />

<form action="">
<select name="customers" onchange="showCustomer(this.value)" style="font-family:Verdana, Arial, Helvetica, sans-serif;">
<option value="APPLE">Apple Computer, Inc.</option>
<option value="BAIDU ">BAIDU, Inc</option>
<option value="Canon">Canon USA, Inc.</option>
<option value="Google">Google, Inc.</option>
<option value="Nokia">Nokia Corporation</option>
<option value="SONY">Sony Corporation of America</option>
</select>
</form>
<br>
<div id="txtHint">Customer info will be listed here...</div>


<br />


<br />


AJAX 实例
一个简单的AJAX实例

创建一个简单的XMLHttpRequest，从一个TXT文件中返回数据。

用AJAX加载 XML 文件

创建一个简单的XMLHttpRequest，从一个XML文件中返回数据。

用AJAX进行一次 HEAD 请求

检索资源（文件）的头信息。

用AJAX进行一次指定的 HEAD 请求

检索资源（文件）的指定头信息。

用AJAX从ASP 文件返回数据

当用户在文本框内键入字符时网页如何与Web服务器进行通信

用AJAX从数据库返回数据

用AJAX网页如何获取数据库中的信息

用AJAX从XML 文件返回数据

创建一个XMLHttpRequest从XML文件中检索数据并显示在一个HTML表格中。

用callback函数的AJAX实例

用一个callback函数创建一个XMLHttpRequest，并从一个TXT文件中检索数据。




</body>

<script>

//创建 XMLHttpRequest 对象的语法：
//variable=new XMLHttpRequest();
//GET 还是 POST？
//与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。
//
//然而，在以下情况中，请使用 POST 请求：
//
//无法使用缓存文件（更新服务器上的文件或数据库）
//
//向服务器发送大量数据（POST 没有数据量限制）
//
//发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠
//GET
//xmlhttp.open("GET","demo_get.html",true);
//xmlhttp.send();
//POST
//xmlhttp.open("POST","demo_post.html",true);
//xmlhttp.send();
//xmlhttp.open("GET","demo_get2.html?fname=Henry&lname=Ford",true);
//xmlhttp.send();
//
//xmlhttp.open("POST","ajax_test.html",true);
//xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
//xmlhttp.send("fname=Henry&lname=Ford");

//
//xmlhttp.onreadystatechange=function()
//  {
//  if (xmlhttp.readyState==4 && xmlhttp.status==200)
//    {
//    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
//    }
//  }
///callback 函数是一种以参数形式传递给另一个函数的函数
//function myFunction()
//{
//loadXMLDoc("ajax_info.txt",function()
//  {
//  if (xmlhttp.readyState==4 && xmlhttp.status==200)
//    {
//    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
//    }
//  });
//}

<!--<script>-->
<!--function showHint(str)-->
<!--{-->
<!--var xmlhttp;-->
<!--if (str.length==0)-->
  <!--{ -->
  <!--document.getElementById("txtHint").innerHTML="";-->
  <!--return;-->
  <!--}-->
<!--if (window.XMLHttpRequest)-->
  <!--{// code for IE7+, Firefox, Chrome, Opera, Safari-->
  <!--xmlhttp=new XMLHttpRequest();-->
  <!--}-->
<!--else-->
  <!--{// code for IE6, IE5-->
  <!--xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");-->
  <!--}-->
<!--xmlhttp.onreadystatechange=function()-->
  <!--{-->
  <!--if (xmlhttp.readyState==4 && xmlhttp.status==200)-->
    <!--{-->
    <!--document.getElementById("txtHint").innerHTML=xmlhttp.responseText;-->
    <!--}-->
  <!--}-->
<!--xmlhttp.open("GET","/try/ajax_gethint.asp?q="+str,true);-->
<!--xmlhttp.send();-->
<!--</script>-->


<!--<html>-->

<!--<head>-->
<!--<script>-->
<!--function showCustomer(str)-->
<!--{-->
<!--var xmlhttp;    -->
<!--if (str=="")-->
  <!--{-->
  <!--document.getElementById("txtHint").innerHTML="";-->
  <!--return;-->
  <!--}-->
<!--if (window.XMLHttpRequest)-->
  <!--{// code for IE7+, Firefox, Chrome, Opera, Safari-->
  <!--xmlhttp=new XMLHttpRequest();-->
  <!--}-->
<!--else-->
  <!--{// code for IE6, IE5-->
  <!--xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");-->
  <!--}-->
<!--xmlhttp.onreadystatechange=function()-->
  <!--{-->
  <!--if (xmlhttp.readyState==4 && xmlhttp.status==200)-->
    <!--{-->
    <!--document.getElementById("txtHint").innerHTML=xmlhttp.responseText;-->
    <!--}-->
  <!--}-->
<!--xmlhttp.open("GET","/try/ajax_database/?q="+str,true);-->
<!--xmlhttp.send();-->
<!--}-->
<!--</script>-->

<!--</head><body>-->
<!--<form action="">-->
<!--<select name="customers" onchange="showCustomer(this.value)" style="font-family:Verdana, Arial, Helvetica, sans-serif;">-->
<!--<option value="APPLE">Apple Computer, Inc.</option>-->
<!--<option value="BAIDU ">BAIDU, Inc</option>-->
<!--<option value="Canon">Canon USA, Inc.</option>-->
<!--<option value="Google">Google, Inc.</option>-->
<!--<option value="Nokia">Nokia Corporation</option>-->
<!--<option value="SONY">Sony Corporation of America</option>-->
<!--</select>-->
<!--</form>-->
<!--<br>-->
<!--<div id="txtHint">Customer info will be listed here...</div>-->
<!--</body>-->
<!--</html>-->



<!--<html>-->

<!--<head>-->
<!--<script>-->
<!--function loadXMLDoc(url)-->
<!--{-->
<!--var xmlhttp;-->
<!--var txt,x,xx,i;-->
<!--if (window.XMLHttpRequest)-->
  <!--{// code for IE7+, Firefox, Chrome, Opera, Safari-->
  <!--xmlhttp=new XMLHttpRequest();-->
  <!--}-->
<!--else-->
  <!--{// code for IE6, IE5-->
  <!--xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");-->
  <!--}-->
<!--xmlhttp.onreadystatechange=function()-->
  <!--{-->
  <!--if (xmlhttp.readyState==4 && xmlhttp.status==200)-->
    <!--{-->
    <!--txt="<table border='1'><tr><th>Title</th><th>Artist</th></tr>";-->
    <!--x=xmlhttp.responseXML.documentElement.getElementsByTagName("CD");-->
    <!--for (i=0;i<x.length;i++)-->
      <!--{-->
      <!--txt=txt + "<tr>";-->
      <!--xx=x[i].getElementsByTagName("TITLE");-->
        <!--{-->
        <!--try-->
          <!--{-->
          <!--txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";-->
          <!--}-->
        <!--catch (er)-->
          <!--{-->
          <!--txt=txt + "<td>&nbsp;</td>";-->
          <!--}-->
        <!--}-->
      <!--xx=x[i].getElementsByTagName("ARTIST");-->
        <!--{-->
        <!--try-->
          <!--{-->
          <!--txt=txt + "<td>" + xx[0].firstChild.nodeValue + "</td>";-->
          <!--}-->
        <!--catch (er)-->
          <!--{-->
          <!--txt=txt + "<td>&nbsp;</td>";-->
          <!--}-->
        <!--}-->
      <!--txt=txt + "</tr>";-->
      <!--}-->
    <!--txt=txt + "</table>";-->
    <!--document.getElementById('txtCDInfo').innerHTML=txt;-->
    <!--}-->
  <!--}-->
<!--xmlhttp.open("GET",url,true);-->
<!--xmlhttp.send();-->
<!--}-->
<!--</script>-->

<!--</head><body>-->
<!--<div id="txtCDInfo">-->
<!--<button onclick="loadXMLDoc('cd_catalog.xml')">Get CD info</button>-->
<!--</div>-->
<!--</body>-->
<!--</html>-->






</script>

</html>